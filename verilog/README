Steps to creating and building the KiwiSDR project with Vivado
    Tested using Vivado 2014.4
    Updated 1-Jun-2017

1) You will most likely be running Vivado on a Windows or Linux machine.
We run Vivado successfully on a MacBook Pro using the VirtualBox application to emulate a PC
and then running Ubuntu Linux on that and Vivado on that! (talk about punishment, lol).

2) Move KiwiSDR Verilog source files into a directory on the machine you will run Vivado.
We suggest creating a directory like verilog/KiwiSDR/import_srcs and copying the files from
KiwiSDR_SDR_GPS/verilog/ to there. In a few steps you will tell Vivado to use verilog/KiwiSDR
as the project directory and it will create a bunch of files there, but will not modify the
import_srcs/ subdirectory. You can then update import_srcs/ when you (or we) make changes to
the Verilog code.

3) Now there is the question of the Vivado IP (intellectual property) blocks. If someone knows a
better way to handle this issue in Vivado, please, please let us know. We have not found a good
solution. There seem to be two ways to setup the IP:

a) Define the 11 necessary IP blocks from the IP catalog using the configuration parameters
we provide. This is a tedious and error-prone process. But you only have to do it once.

b) There is a separate project on Github that has all the IP files (one hundred megabytes!!!)
pre-compiled using Vivado 2014.14. You can download all that into the subdirectory
verilog/KiwiSDR/import_ip and tell Vivado to use it when the project is setup below.

There seems to be no way to simply include a small file in the Kiwi distribution that has all the
configuration information from a) above. And then have Vivado do a one-time build of the IP.
Either you have to enter all the configuration information by hand or copy the entire
compiled IP files.

4) We are now ready to setup the project. Start Vivado.
">" denotes a user action (keyboard entry, mouse button push etc.)

5) On the front page after starting Vivado:
    > Quick Start > Create project

6) New Project menu
    > Next
    Project Name
        Project name
            > KiwiSDR
        Project location
            > verilog/      (note: NOT verilog/KiwiSDR/)
            Doesn't matter is "Create project subdirectory" is checked or not since
            verilog/KiwiSDR/ already exists.
    Project Type
        > RTL Project
    Add Sources
        > Add Directories
            Choose the verilog/KiwiSDR/import_srcs/ subdirectory.
            > Select
            Make sure "Copy sources into project" is NOT checked.
            Make sure "Add sources from subdirectories" is checked.
            Make sure target language is Verilog.
            > Next
    Add Existing IP
        If you're going to enter the IP block configuration by hand just enter:
            > Next
        If you've downloaded the 100MB of pre-compiled IP to verilog/KiwiSDR/import_ip/ then:
            > Add Directories
                And specify the verilog/KiwiSDR/import_ip/ subdirectory.
                > Select
                Make sure "Copy sources into project" is NOT checked.
                > Next
    Add Constraints
        > Add files
            Navigate to the verilog/KiwiSDR/import_ip/ directory and select the KiwiSDR.xdc file.
            > OK
            Make sure "Copy constraints files into project" is NOT checked.
                > Next
    Default Part
        Sub-Family
            > Artix-7
        Package
            > ftg256
        Speed-grade
            > -1
        Then select the xc7a35tftg256-1 from the list.
        > Next
    New Project Summary
        >Finish

7) Now the main Vivado user interface will appear. After it settles down do this:
Project Manager > Sources
Select the "KiwiSDR (kiwi.v)" entry.
With right mouse button select "Set As Top".
Make the unused module files disabled. First select them. Then with the right mouse button
select "disable file". Do this for the file waterfall.v. Then select the file
cic_seq_iq.v and then with the shift key pressed select the file how_big.v.
All the files between those two will also be selected. Right button "disable file".
Only kiwi.v and ip_add_s48b.v should remain.

8) If you need to define the IP blocks by hand open the IP catalog:
Window > IP Catalog
Follow the instructions in the file KiwiSDR_SDR_GPS/verilog/ip/README (will also be
on your Vivado machine as verilog/KiwiSDR/import_ip/README).

9) Build the Verilog by clicking the "Generate Bitstream" icon in the Vivado toolbar (10th from left).
You should get result similar to these:

Error count:
    Synthesis = 243 (may vary)
    Implementation = 73
    DRC advisories = 55

Utilization - Post Implementation:
    FF 47%, LUT 68%
    BRAM 89%, DSP 50%

10) The new .bit file will be in verilog/KiwiSDR/KiwiSDR.runs/impl_1/KiwiSDR.bit
Copy this to the Beagle_SDR_GPS/ directory where you build the Kiwi server code.
